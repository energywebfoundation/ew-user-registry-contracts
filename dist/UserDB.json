{"abi":[{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_organization","type":"string"}],"name":"setOrganization","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_roles","type":"uint256"}],"name":"setRoles","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_organization","type":"string"}],"name":"setUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_active","type":"bool"}],"name":"setUserActive","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_user","type":"address"}],"name":"getFullUser","outputs":[{"components":[{"name":"organization","type":"string"},{"name":"roles","type":"uint256"},{"name":"active","type":"bool"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_logic","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_newOwner","type":"address"}],"name":"LogChangeOwner","type":"event"}],"bytecode":"608060405234801561001057600080fd5b50604051602080610efe833981018060405261002f919081019061008b565b80806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050506100d4565b600061008382516100b4565b905092915050565b60006020828403121561009d57600080fd5b60006100ab84828501610077565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b610e1b806100e36000396000f300608060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630ea6af871461008857806333a3ad8f146100b15780633f1a51b8146100da57806388e084ca146101035780638da5cb5b1461012c578063a6f9dae114610157578063c7af3efc14610180575b600080fd5b34801561009457600080fd5b506100af60048036036100aa9190810190610af4565b6101bd565b005b3480156100bd57600080fd5b506100d860048036036100d39190810190610b4c565b610308565b005b3480156100e657600080fd5b5061010160048036036100fc9190810190610af4565b6103ea565b005b34801561010f57600080fd5b5061012a60048036036101259190810190610ab8565b6104f5565b005b34801561013857600080fd5b506101416105ea565b60405161014e9190610ca9565b60405180910390f35b34801561016357600080fd5b5061017e60048036036101799190810190610a8f565b61060f565b005b34801561018c57600080fd5b506101a760048036036101a29190810190610a8f565b61078c565b6040516101b49190610d04565b60405180910390f35b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610250576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161024790610ce4565b60405180910390fd5b83600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff1615156102ac57600080fd5b600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209150838383600001919061030092919061093e565b505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561039b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161039290610ce4565b60405180910390fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050818160010181905550505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561047d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161047490610ce4565b60405180910390fd5b600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905082828260000191906104d192919061093e565b5060018160020160006101000a81548160ff02191690831515021790555050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610588576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161057f90610ce4565b60405180910390fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050818160020160006101000a81548160ff021916908315150217905550505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156106a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069790610ce4565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610712576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161070990610cc4565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16816040516107819190610ca9565b60405180910390a150565b6107946109be565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610825576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081c90610ce4565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060606040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109095780601f106108de57610100808354040283529160200191610909565b820191906000526020600020905b8154815290600101906020018083116108ec57829003601f168201915b50505050508152602001600182015481526020016002820160009054906101000a900460ff1615151515815250509050919050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061097f57803560ff19168380011785556109ad565b828001600101855582156109ad579182015b828111156109ac578235825591602001919060010190610991565b5b5090506109ba91906109e2565b5090565b60606040519081016040528060608152602001600081526020016000151581525090565b610a0491905b80821115610a005760008160009055506001016109e8565b5090565b90565b6000610a138235610d67565b905092915050565b6000610a278235610d87565b905092915050565b60008083601f8401121515610a4357600080fd5b8235905067ffffffffffffffff811115610a5c57600080fd5b602083019150836001820283011115610a7457600080fd5b9250929050565b6000610a878235610d93565b905092915050565b600060208284031215610aa157600080fd5b6000610aaf84828501610a07565b91505092915050565b60008060408385031215610acb57600080fd5b6000610ad985828601610a07565b9250506020610aea85828601610a1b565b9150509250929050565b600080600060408486031215610b0957600080fd5b6000610b1786828701610a07565b935050602084013567ffffffffffffffff811115610b3457600080fd5b610b4086828701610a2f565b92509250509250925092565b60008060408385031215610b5f57600080fd5b6000610b6d85828601610a07565b9250506020610b7e85828601610a7b565b9150509250929050565b610b9181610d31565b82525050565b610ba081610d51565b82525050565b6000610bb182610d26565b808452610bc5816020860160208601610d9d565b610bce81610dd0565b602085010191505092915050565b6000601882527f307830206173206f776e6572206e6f7420616c6c6f77656400000000000000006020830152604082019050919050565b6000601782527f6d73672e73656e646572206973206e6f74206f776e65720000000000000000006020830152604082019050919050565b60006060830160008301518482036000860152610c678282610ba6565b9150506020830151610c7c6020860182610c9a565b506040830151610c8f6040860182610b97565b508091505092915050565b610ca381610d5d565b82525050565b6000602082019050610cbe6000830184610b88565b92915050565b60006020820190508181036000830152610cdd81610bdc565b9050919050565b60006020820190508181036000830152610cfd81610c13565b9050919050565b60006020820190508181036000830152610d1e8184610c4a565b905092915050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b60005b83811015610dbb578082015181840152602081019050610da0565b83811115610dca576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a723058205b2516760d0a84837288532d966f7fe2d137bc0146b0a1f259ee623e9157c0d86c6578706572696d656e74616cf50037","contractName":"UserDB","deployedBytecode":"608060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630ea6af871461008857806333a3ad8f146100b15780633f1a51b8146100da57806388e084ca146101035780638da5cb5b1461012c578063a6f9dae114610157578063c7af3efc14610180575b600080fd5b34801561009457600080fd5b506100af60048036036100aa9190810190610af4565b6101bd565b005b3480156100bd57600080fd5b506100d860048036036100d39190810190610b4c565b610308565b005b3480156100e657600080fd5b5061010160048036036100fc9190810190610af4565b6103ea565b005b34801561010f57600080fd5b5061012a60048036036101259190810190610ab8565b6104f5565b005b34801561013857600080fd5b506101416105ea565b60405161014e9190610ca9565b60405180910390f35b34801561016357600080fd5b5061017e60048036036101799190810190610a8f565b61060f565b005b34801561018c57600080fd5b506101a760048036036101a29190810190610a8f565b61078c565b6040516101b49190610d04565b60405180910390f35b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610250576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161024790610ce4565b60405180910390fd5b83600160008273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff1615156102ac57600080fd5b600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209150838383600001919061030092919061093e565b505050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561039b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161039290610ce4565b60405180910390fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050818160010181905550505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561047d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161047490610ce4565b60405180910390fd5b600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020905082828260000191906104d192919061093e565b5060018160020160006101000a81548160ff02191690831515021790555050505050565b60008060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610588576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161057f90610ce4565b60405180910390fd5b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000209050818160020160006101000a81548160ff021916908315150217905550505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156106a0576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069790610ce4565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610712576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161070990610cc4565b60405180910390fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16816040516107819190610ca9565b60405180910390a150565b6107946109be565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610825576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081c90610ce4565b60405180910390fd5b600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060606040519081016040529081600082018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109095780601f106108de57610100808354040283529160200191610909565b820191906000526020600020905b8154815290600101906020018083116108ec57829003601f168201915b50505050508152602001600182015481526020016002820160009054906101000a900460ff1615151515815250509050919050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061097f57803560ff19168380011785556109ad565b828001600101855582156109ad579182015b828111156109ac578235825591602001919060010190610991565b5b5090506109ba91906109e2565b5090565b60606040519081016040528060608152602001600081526020016000151581525090565b610a0491905b80821115610a005760008160009055506001016109e8565b5090565b90565b6000610a138235610d67565b905092915050565b6000610a278235610d87565b905092915050565b60008083601f8401121515610a4357600080fd5b8235905067ffffffffffffffff811115610a5c57600080fd5b602083019150836001820283011115610a7457600080fd5b9250929050565b6000610a878235610d93565b905092915050565b600060208284031215610aa157600080fd5b6000610aaf84828501610a07565b91505092915050565b60008060408385031215610acb57600080fd5b6000610ad985828601610a07565b9250506020610aea85828601610a1b565b9150509250929050565b600080600060408486031215610b0957600080fd5b6000610b1786828701610a07565b935050602084013567ffffffffffffffff811115610b3457600080fd5b610b4086828701610a2f565b92509250509250925092565b60008060408385031215610b5f57600080fd5b6000610b6d85828601610a07565b9250506020610b7e85828601610a7b565b9150509250929050565b610b9181610d31565b82525050565b610ba081610d51565b82525050565b6000610bb182610d26565b808452610bc5816020860160208601610d9d565b610bce81610dd0565b602085010191505092915050565b6000601882527f307830206173206f776e6572206e6f7420616c6c6f77656400000000000000006020830152604082019050919050565b6000601782527f6d73672e73656e646572206973206e6f74206f776e65720000000000000000006020830152604082019050919050565b60006060830160008301518482036000860152610c678282610ba6565b9150506020830151610c7c6020860182610c9a565b506040830151610c8f6040860182610b97565b508091505092915050565b610ca381610d5d565b82525050565b6000602082019050610cbe6000830184610b88565b92915050565b60006020820190508181036000830152610cdd81610bdc565b9050919050565b60006020820190508181036000830152610cfd81610c13565b9050919050565b60006020820190508181036000830152610d1e8184610c4a565b905092915050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b60005b83811015610dbb578082015181840152602081019050610da0565b83811115610dca576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a723058205b2516760d0a84837288532d966f7fe2d137bc0146b0a1f259ee623e9157c0d86c6578706572696d656e74616cf50037","source":"// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector, \n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH, Martin Kuechler, martin.kuchler@slock.it\npragma solidity ^0.4.24;\npragma experimental ABIEncoderV2;\n\nimport \"ew-utils-general-contracts/Msc/Owned.sol\";\n\n/// @title The database contract for the users, traders and admins of the certificate of origin\n/// @notice This contract only provides getter and setter methods that are only callable by the corresponging owner-contract\ncontract UserDB is Owned {\n    \n    /// @notice The structure of an user / admin / trader\n    /// @dev as it's for now impossible to return a struct, there is a special get-function for this struct. \n    /// @dev keep in mind to update that function aswell when changing the user-struct\n    struct User {\n        string organization;\n        uint roles;\n        bool active;\n    }\n\n    /// @notice mapping for addresses to users\n    mapping(address => User) private userList;  \n\n    modifier userExists(address _user) {\n        require(userList[_user].active);\n        _;\n    }\n\n    /// @notice The constructor of the UserDB\n    /// @dev the deployer of this contract will get full adminrights!\n    constructor(address _logic) Owned(_logic) public { }\n\n    /// @notice function to change the name of an existing organization, can only be used when the user already exists\n    /// @dev the onlyOwner-modifier is used, so that only the logic-contract is allowed to write into the storage\n    /// @param _user ethereum-address of an user\n    /// @param _organization new name of the organization\n    function setOrganization(address _user, string _organization) external onlyOwner userExists(_user){\n        User storage u = userList[_user];\n        u.organization = _organization;\n    }\n\n    /// @notice function for creating, editing an user, it cannot be used to set a Role of an user\n    /// @notice if the user does not exists yet it will be creates, otherwise the older userdata will be overwritten\n    /// @dev the onlyOwner-modifier is used, so that only the logic-contract is allowed to write into the storage\n    /// @param _user address of the user\n    /// @param _organization organization the user is representing\n    function setUser(\n        address _user, \n        string _organization\n    ) \n        external \n        onlyOwner \n    {\n        User storage u = userList[_user];\n        u.organization = _organization;\n        u.active = true;\n    }\n \n    /// @notice function to (de-)active a user, dan only be used when the user already exists\n    /// @dev the onlyOwner-modifier is used, so that only the logic-contract is allowed to write into the storage\n    /// @param _user ethereum-address of an user\n    /// @param _active flag if the account should be active\n    function setUserActive(address _user, bool _active) external onlyOwner {\n        User storage u = userList[_user];\n        u.active = _active;\n    }\n\n    /// @notice function for editing the rights of an user\n    /// @dev the onlyOwner-modifier is used, so that only the logic-contract is allowed to write into the storage\n    /// @param _user address of the user\n    /// @param _roles first name of the user\n    function setRoles(address _user, uint _roles) external onlyOwner {\n        User storage u = userList[_user];\n        u.roles = _roles;\n    } \n\n    /// @notice function to return all the data of an user\n    /// @dev the onlyOwner-modifier is used, so that only the logic-contract is allowed to read directly from the contract\n    /// @param _user user \n    /// @return returns firstName, surname, organization, street, number, zip, city, country, state, roles and the active-flag\n    function getFullUser(address _user)\n        onlyOwner\n        external\n        view \n        returns (\n          User\n        )\n    {\n        return userList[_user];\n    }  \n}","networks":"{}"}