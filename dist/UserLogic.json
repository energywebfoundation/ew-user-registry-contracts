{"abi":[{"constant":false,"inputs":[{"name":"_database","type":"address"}],"name":"init","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"}],"name":"deactivateUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_newLogic","type":"address"}],"name":"update","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_user","type":"address"}],"name":"getRolesRights","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_rights","type":"uint256"}],"name":"setRoles","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_user","type":"address"},{"name":"_organization","type":"string"}],"name":"setUser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"userContractLookup","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"db","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_role","type":"uint8"},{"name":"_caller","type":"address"}],"name":"isRole","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_user","type":"address"}],"name":"getFullUser","outputs":[{"name":"_organization","type":"string"},{"name":"_roles","type":"uint256"},{"name":"_active","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_user","type":"address"}],"name":"doesUserExist","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_userContractLookup","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_newOwner","type":"address"}],"name":"LogChangeOwner","type":"event"}],"bytecode":"60806040523480156200001157600080fd5b5060405160208062001e1a8339810180604052620000339190810190620000d5565b8033806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505080600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505062000135565b6000620000cd825162000121565b905092915050565b600060208284031215620000e857600080fd5b6000620000f884828501620000bf565b91505092915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200012e8262000101565b9050919050565b611cd580620001456000396000f3006080604052600436106100c5576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806319ab453c146100ca5780631a47767b146100f35780631c1b87721461011c578063265209f21461014557806333a3ad8f146101825780633f1a51b8146101ab57806344724c8c146101d45780634d655aff146101ff5780638da5cb5b1461022a578063a6f9dae114610255578063bb5a389e1461027e578063c7af3efc146102bb578063ecb41054146102fa575b600080fd5b3480156100d657600080fd5b506100f160048036036100ec919081019061153c565b610337565b005b3480156100ff57600080fd5b5061011a6004803603610115919081019061153c565b610520565b005b34801561012857600080fd5b50610143600480360361013e919081019061153c565b610724565b005b34801561015157600080fd5b5061016c6004803603610167919081019061153c565b6108a9565b6040516101799190611b20565b60405180910390f35b34801561018e57600080fd5b506101a960048036036101a491908101906115e6565b610984565b005b3480156101b757600080fd5b506101d260048036036101cd919081019061158e565b610ca6565b005b3480156101e057600080fd5b506101e9610ea2565b6040516101f691906119ec565b60405180910390f35b34801561020b57600080fd5b50610214610ec8565b6040516102219190611a07565b60405180910390f35b34801561023657600080fd5b5061023f610eee565b60405161024c9190611932565b60405180910390f35b34801561026157600080fd5b5061027c6004803603610277919081019061153c565b610f13565b005b34801561028a57600080fd5b506102a560048036036102a0919081019061164b565b611024565b6040516102b291906119d1565b60405180910390f35b3480156102c757600080fd5b506102e260048036036102dd919081019061153c565b6111b1565b6040516102f193929190611a22565b60405180910390f35b34801561030657600080fd5b50610321600480360361031c919081019061153c565b6112ab565b60405161032e91906119d1565b60405180910390f35b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561039257600080fd5b600073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515610425576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161041c90611a80565b60405180910390fd5b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166333a3ad8f33600060068111156104b257fe5b6040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016104eb9291906119a8565b600060405180830381600087803b15801561050557600080fd5b505af1158015610519573d6000803e3d6000fd5b5050505050565b600161052c8133611024565b151561056d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056490611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156105eb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e290611ac0565b60405180910390fd5b6105f6600083611024565b15801561060b5750610609600183611024565b155b801561061f575061061d600283611024565b155b80156106335750610631600383611024565b155b1515610674576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161066b90611a60565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166388e084ca8360006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016106ee92919061194d565b600060405180830381600087803b15801561070857600080fd5b505af115801561071c573d6000803e3d6000fd5b505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561077f57600080fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156107fd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107f490611ac0565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a6f9dae1826040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016108749190611932565b600060405180830381600087803b15801561088e57600080fd5b505af11580156108a2573d6000803e3d6000fd5b5050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016109229190611932565b600060405180830381600087803b15801561093c57600080fd5b505af1158015610950573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052506109799190810190611687565b602001519050919050565b60016109908133611024565b15156109d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c890611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690611ac0565b60405180910390fd5b82600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610ad657600080fd5b505af1158015610aea573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610b0e9190810190611565565b73ffffffffffffffffffffffffffffffffffffffff1663ecb41054826040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610b629190611932565b602060405180830381600087803b158015610b7c57600080fd5b505af1158015610b90573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb49190810190611622565b1515610bf5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bec90611b00565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166333a3ad8f85856040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610c6e9291906119a8565b600060405180830381600087803b158015610c8857600080fd5b505af1158015610c9c573d6000803e3d6000fd5b5050505050505050565b60606001610cb48133611024565b1515610cf5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cec90611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610d73576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d6a90611ac0565b60405180910390fd5b83838080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050915060008251111515610dee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610de590611aa0565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633f1a51b88686866040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610e6993929190611976565b600060405180830381600087803b158015610e8357600080fd5b505af1158015610e97573d6000803e3d6000fd5b505050505050505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f6e57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610faa57600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16816040516110199190611932565b60405180910390a150565b6000806000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156110af57600080fd5b505af11580156110c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506110e79190810190611565565b73ffffffffffffffffffffffffffffffffffffffff1663265209f2856040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161113b9190611932565b602060405180830381600087803b15801561115557600080fd5b505af1158015611169573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061118d91908101906116c8565b915084600681111561119b57fe5b60020a9050600081831614159250505092915050565b60606000806111be611386565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc866040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016112359190611932565b600060405180830381600087803b15801561124f57600080fd5b505af1158015611263573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061128c9190810190611687565b9050806000015193508060200151925080604001519150509193909250565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016113249190611932565b600060405180830381600087803b15801561133e57600080fd5b505af1158015611352573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061137b9190810190611687565b604001519050919050565b60606040519081016040528060608152602001600081526020016000151581525090565b60006113b68235611bd5565b905092915050565b60006113ca8251611bd5565b905092915050565b60006113de8251611bf5565b905092915050565b60006113f28235611c01565b905092915050565b60008083601f840112151561140e57600080fd5b8235905067ffffffffffffffff81111561142757600080fd5b60208301915083600182028301111561143f57600080fd5b9250929050565b600082601f830112151561145957600080fd5b815161146c61146782611b68565b611b3b565b9150808252602083016020830185838301111561148857600080fd5b611493838284611c57565b50505092915050565b6000606082840312156114ae57600080fd5b6114b86060611b3b565b9050600082015167ffffffffffffffff8111156114d457600080fd5b6114e084828501611446565b60008301525060206114f484828501611528565b6020830152506040611508848285016113d2565b60408301525092915050565b60006115208235611c1a565b905092915050565b60006115348251611c1a565b905092915050565b60006020828403121561154e57600080fd5b600061155c848285016113aa565b91505092915050565b60006020828403121561157757600080fd5b6000611585848285016113be565b91505092915050565b6000806000604084860312156115a357600080fd5b60006115b1868287016113aa565b935050602084013567ffffffffffffffff8111156115ce57600080fd5b6115da868287016113fa565b92509250509250925092565b600080604083850312156115f957600080fd5b6000611607858286016113aa565b925050602061161885828601611514565b9150509250929050565b60006020828403121561163457600080fd5b6000611642848285016113d2565b91505092915050565b6000806040838503121561165e57600080fd5b600061166c858286016113e6565b925050602061167d858286016113aa565b9150509250929050565b60006020828403121561169957600080fd5b600082015167ffffffffffffffff8111156116b357600080fd5b6116bf8482850161149c565b91505092915050565b6000602082840312156116da57600080fd5b60006116e884828501611528565b91505092915050565b6116fa81611b9f565b82525050565b61170981611bbf565b82525050565b61171881611c24565b82525050565b61172781611c36565b82525050565b6000828452602084019350611743838584611c48565b61174c83611c8a565b840190509392505050565b600061176282611b94565b808452611776816020860160208601611c57565b61177f81611c8a565b602085010191505092915050565b6000602482527f757365722068617320616e2061646d696e20726f6c6520617420746865206d6f60208301527f6d656e74000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601682527f646220616c726561647920696e697469616c697a6564000000000000000000006020830152604082019050919050565b6000600c82527f656d70747920737472696e6700000000000000000000000000000000000000006020830152604082019050919050565b6000601382527f616c726561647920696e697469616c697a6564000000000000000000000000006020830152604082019050919050565b6000602482527f7573657220646f6573206e6f742068617665207468652072657175697265642060208301527f726f6c65000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601382527f5573657220646f6573206e6f74206578697374000000000000000000000000006020830152604082019050919050565b61192c81611bcb565b82525050565b600060208201905061194760008301846116f1565b92915050565b600060408201905061196260008301856116f1565b61196f6020830184611700565b9392505050565b600060408201905061198b60008301866116f1565b818103602083015261199e81848661172d565b9050949350505050565b60006040820190506119bd60008301856116f1565b6119ca6020830184611923565b9392505050565b60006020820190506119e66000830184611700565b92915050565b6000602082019050611a01600083018461170f565b92915050565b6000602082019050611a1c600083018461171e565b92915050565b60006060820190508181036000830152611a3c8186611757565b9050611a4b6020830185611923565b611a586040830184611700565b949350505050565b60006020820190508181036000830152611a798161178d565b9050919050565b60006020820190508181036000830152611a99816117ea565b9050919050565b60006020820190508181036000830152611ab981611821565b9050919050565b60006020820190508181036000830152611ad981611858565b9050919050565b60006020820190508181036000830152611af98161188f565b9050919050565b60006020820190508181036000830152611b19816118ec565b9050919050565b6000602082019050611b356000830184611923565b92915050565b6000604051905081810181811067ffffffffffffffff82111715611b5e57600080fd5b8060405250919050565b600067ffffffffffffffff821115611b7f57600080fd5b601f19601f8301169050602081019050919050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000600782101515611c1257600080fd5b819050919050565b6000819050919050565b6000611c2f82611b9f565b9050919050565b6000611c4182611b9f565b9050919050565b82818337600083830152505050565b60005b83811015611c75578082015181840152602081019050611c5a565b83811115611c84576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a72305820443781d3e47f76c8bfda97624a7911d98451d8d540cc067024c304e6edf90a016c6578706572696d656e74616cf50037","contractName":"UserLogic","deployedBytecode":"6080604052600436106100c5576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806319ab453c146100ca5780631a47767b146100f35780631c1b87721461011c578063265209f21461014557806333a3ad8f146101825780633f1a51b8146101ab57806344724c8c146101d45780634d655aff146101ff5780638da5cb5b1461022a578063a6f9dae114610255578063bb5a389e1461027e578063c7af3efc146102bb578063ecb41054146102fa575b600080fd5b3480156100d657600080fd5b506100f160048036036100ec919081019061153c565b610337565b005b3480156100ff57600080fd5b5061011a6004803603610115919081019061153c565b610520565b005b34801561012857600080fd5b50610143600480360361013e919081019061153c565b610724565b005b34801561015157600080fd5b5061016c6004803603610167919081019061153c565b6108a9565b6040516101799190611b20565b60405180910390f35b34801561018e57600080fd5b506101a960048036036101a491908101906115e6565b610984565b005b3480156101b757600080fd5b506101d260048036036101cd919081019061158e565b610ca6565b005b3480156101e057600080fd5b506101e9610ea2565b6040516101f691906119ec565b60405180910390f35b34801561020b57600080fd5b50610214610ec8565b6040516102219190611a07565b60405180910390f35b34801561023657600080fd5b5061023f610eee565b60405161024c9190611932565b60405180910390f35b34801561026157600080fd5b5061027c6004803603610277919081019061153c565b610f13565b005b34801561028a57600080fd5b506102a560048036036102a0919081019061164b565b611024565b6040516102b291906119d1565b60405180910390f35b3480156102c757600080fd5b506102e260048036036102dd919081019061153c565b6111b1565b6040516102f193929190611a22565b60405180910390f35b34801561030657600080fd5b50610321600480360361031c919081019061153c565b6112ab565b60405161032e91906119d1565b60405180910390f35b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561039257600080fd5b600073ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515610425576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161041c90611a80565b60405180910390fd5b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166333a3ad8f33600060068111156104b257fe5b6040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016104eb9291906119a8565b600060405180830381600087803b15801561050557600080fd5b505af1158015610519573d6000803e3d6000fd5b5050505050565b600161052c8133611024565b151561056d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161056490611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156105eb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105e290611ac0565b60405180910390fd5b6105f6600083611024565b15801561060b5750610609600183611024565b155b801561061f575061061d600283611024565b155b80156106335750610631600383611024565b155b1515610674576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161066b90611a60565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166388e084ca8360006040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016106ee92919061194d565b600060405180830381600087803b15801561070857600080fd5b505af115801561071c573d6000803e3d6000fd5b505050505050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561077f57600080fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16141515156107fd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107f490611ac0565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a6f9dae1826040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016108749190611932565b600060405180830381600087803b15801561088e57600080fd5b505af11580156108a2573d6000803e3d6000fd5b5050505050565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016109229190611932565b600060405180830381600087803b15801561093c57600080fd5b505af1158015610950573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f820116820180604052506109799190810190611687565b602001519050919050565b60016109908133611024565b15156109d1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c890611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690611ac0565b60405180910390fd5b82600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b158015610ad657600080fd5b505af1158015610aea573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610b0e9190810190611565565b73ffffffffffffffffffffffffffffffffffffffff1663ecb41054826040518263ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610b629190611932565b602060405180830381600087803b158015610b7c57600080fd5b505af1158015610b90573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb49190810190611622565b1515610bf5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bec90611b00565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166333a3ad8f85856040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610c6e9291906119a8565b600060405180830381600087803b158015610c8857600080fd5b505af1158015610c9c573d6000803e3d6000fd5b5050505050505050565b60606001610cb48133611024565b1515610cf5576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cec90611ae0565b60405180910390fd5b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151515610d73576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d6a90611ac0565b60405180910390fd5b83838080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050915060008251111515610dee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610de590611aa0565b60405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633f1a51b88686866040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610e6993929190611976565b600060405180830381600087803b158015610e8357600080fd5b505af1158015610e97573d6000803e3d6000fd5b505050505050505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610f6e57600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1614151515610faa57600080fd5b806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055507f95fd54179c11867fb083dd94347ea50f144dd4cfd7612b7bca169f162824af16816040516110199190611932565b60405180910390a150565b6000806000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16635c7460d66040518163ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401602060405180830381600087803b1580156110af57600080fd5b505af11580156110c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506110e79190810190611565565b73ffffffffffffffffffffffffffffffffffffffff1663265209f2856040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040161113b9190611932565b602060405180830381600087803b15801561115557600080fd5b505af1158015611169573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525061118d91908101906116c8565b915084600681111561119b57fe5b60020a9050600081831614159250505092915050565b60606000806111be611386565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc866040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016112359190611932565b600060405180830381600087803b15801561124f57600080fd5b505af1158015611263573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061128c9190810190611687565b9050806000015193508060200151925080604001519150509193909250565b6000600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663c7af3efc836040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004016113249190611932565b600060405180830381600087803b15801561133e57600080fd5b505af1158015611352573d6000803e3d6000fd5b505050506040513d6000823e3d601f19601f8201168201806040525061137b9190810190611687565b604001519050919050565b60606040519081016040528060608152602001600081526020016000151581525090565b60006113b68235611bd5565b905092915050565b60006113ca8251611bd5565b905092915050565b60006113de8251611bf5565b905092915050565b60006113f28235611c01565b905092915050565b60008083601f840112151561140e57600080fd5b8235905067ffffffffffffffff81111561142757600080fd5b60208301915083600182028301111561143f57600080fd5b9250929050565b600082601f830112151561145957600080fd5b815161146c61146782611b68565b611b3b565b9150808252602083016020830185838301111561148857600080fd5b611493838284611c57565b50505092915050565b6000606082840312156114ae57600080fd5b6114b86060611b3b565b9050600082015167ffffffffffffffff8111156114d457600080fd5b6114e084828501611446565b60008301525060206114f484828501611528565b6020830152506040611508848285016113d2565b60408301525092915050565b60006115208235611c1a565b905092915050565b60006115348251611c1a565b905092915050565b60006020828403121561154e57600080fd5b600061155c848285016113aa565b91505092915050565b60006020828403121561157757600080fd5b6000611585848285016113be565b91505092915050565b6000806000604084860312156115a357600080fd5b60006115b1868287016113aa565b935050602084013567ffffffffffffffff8111156115ce57600080fd5b6115da868287016113fa565b92509250509250925092565b600080604083850312156115f957600080fd5b6000611607858286016113aa565b925050602061161885828601611514565b9150509250929050565b60006020828403121561163457600080fd5b6000611642848285016113d2565b91505092915050565b6000806040838503121561165e57600080fd5b600061166c858286016113e6565b925050602061167d858286016113aa565b9150509250929050565b60006020828403121561169957600080fd5b600082015167ffffffffffffffff8111156116b357600080fd5b6116bf8482850161149c565b91505092915050565b6000602082840312156116da57600080fd5b60006116e884828501611528565b91505092915050565b6116fa81611b9f565b82525050565b61170981611bbf565b82525050565b61171881611c24565b82525050565b61172781611c36565b82525050565b6000828452602084019350611743838584611c48565b61174c83611c8a565b840190509392505050565b600061176282611b94565b808452611776816020860160208601611c57565b61177f81611c8a565b602085010191505092915050565b6000602482527f757365722068617320616e2061646d696e20726f6c6520617420746865206d6f60208301527f6d656e74000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601682527f646220616c726561647920696e697469616c697a6564000000000000000000006020830152604082019050919050565b6000600c82527f656d70747920737472696e6700000000000000000000000000000000000000006020830152604082019050919050565b6000601382527f616c726561647920696e697469616c697a6564000000000000000000000000006020830152604082019050919050565b6000602482527f7573657220646f6573206e6f742068617665207468652072657175697265642060208301527f726f6c65000000000000000000000000000000000000000000000000000000006040830152606082019050919050565b6000601382527f5573657220646f6573206e6f74206578697374000000000000000000000000006020830152604082019050919050565b61192c81611bcb565b82525050565b600060208201905061194760008301846116f1565b92915050565b600060408201905061196260008301856116f1565b61196f6020830184611700565b9392505050565b600060408201905061198b60008301866116f1565b818103602083015261199e81848661172d565b9050949350505050565b60006040820190506119bd60008301856116f1565b6119ca6020830184611923565b9392505050565b60006020820190506119e66000830184611700565b92915050565b6000602082019050611a01600083018461170f565b92915050565b6000602082019050611a1c600083018461171e565b92915050565b60006060820190508181036000830152611a3c8186611757565b9050611a4b6020830185611923565b611a586040830184611700565b949350505050565b60006020820190508181036000830152611a798161178d565b9050919050565b60006020820190508181036000830152611a99816117ea565b9050919050565b60006020820190508181036000830152611ab981611821565b9050919050565b60006020820190508181036000830152611ad981611858565b9050919050565b60006020820190508181036000830152611af98161188f565b9050919050565b60006020820190508181036000830152611b19816118ec565b9050919050565b6000602082019050611b356000830184611923565b92915050565b6000604051905081810181811067ffffffffffffffff82111715611b5e57600080fd5b8060405250919050565b600067ffffffffffffffff821115611b7f57600080fd5b601f19601f8301169050602081019050919050565b600081519050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000819050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60008115159050919050565b6000600782101515611c1257600080fd5b819050919050565b6000819050919050565b6000611c2f82611b9f565b9050919050565b6000611c4182611b9f565b9050919050565b82818337600083830152505050565b60005b83811015611c75578082015181840152602081019050611c5a565b83811115611c84576000848401525b50505050565b6000601f19601f83011690509190505600a265627a7a72305820443781d3e47f76c8bfda97624a7911d98451d8d540cc067024c304e6edf90a016c6578706572696d656e74616cf50037","source":"// Copyright 2018 Energy Web Foundation\n// This file is part of the Origin Application brought to you by the Energy Web Foundation,\n// a global non-profit organization focused on accelerating blockchain technology across the energy sector, \n// incorporated in Zug, Switzerland.\n//\n// The Origin Application is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n// This is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY and without an implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details, at <http://www.gnu.org/licenses/>.\n//\n// @authors: slock.it GmbH, Martin Kuechler, martin.kuechler@slock.it\n\npragma solidity ^0.4.24;\npragma experimental ABIEncoderV2;\n\nimport \"../../contracts/Users/UserDB.sol\";\nimport \"../../contracts/Users/RoleManagement.sol\";\nimport \"ew-utils-general-contracts/Interfaces/Updatable.sol\";\nimport \"../../contracts/Interfaces/RolesInterface.sol\";\nimport \"../../contracts/Interfaces/UserContractLookupInterface.sol\";\n\n\n/// @title The logic-contract for the user-data\n/// @notice this contract will not directly store any data, instead it will store them into the userDB-contract\ncontract UserLogic is RoleManagement, Updatable, RolesInterface {\n\n\n    /// @notice db user-db for storing the contract\n    UserDB public db;\n\n    modifier isInitialized {\n        require(address(db) != 0x0,\"already initialized\");\n        _;\n    }\n\n    /// @notice constructor \n    /// @dev it will also call the RoleManagement-constructor \n    constructor(UserContractLookupInterface _userContractLookup) RoleManagement(_userContractLookup) public {}\n\n    /// @notice function to deactive an use, only executable for user-admins\n    /// @param _user the user that should be deactivated\n    function deactivateUser(address _user)\n        external\n        onlyRole(RoleManagement.Role.UserAdmin)\n        isInitialized\n    {\n        require(\n            !isRole(RoleManagement.Role.TopAdmin,_user)\n            && !isRole(RoleManagement.Role.UserAdmin,_user) \n            && !isRole(RoleManagement.Role.AssetAdmin,_user)\n            && !isRole(RoleManagement.Role.AgreementAdmin,_user)\n            ,\"user has an admin role at the moment\"\n        );\n\n        db.setUserActive(_user, false);\n    }\n\n    /// @notice Initialises the contract by binding it to a logic contract\n    /// @param _database Sets the logic contract\n    function init(address _database) external onlyOwner {\n        require(db == UserDB(0x0), \"db already initialized\");\n        db = UserDB(_database);\n        db.setRoles(msg.sender, uint(RoleManagement.Role.TopAdmin));\n    }\n\n    /// @notice funciton that can be called to create a new user in the storage-contract, only executable for user-admins!\n    /// @notice if the user does not exists yet it will be creates, otherwise the older userdata will be overwritten\n    /// @param _user address of the user\n    /// @param _organization organization the user is representing\n    function setUser(        \n        address _user, \n        string _organization\n    ) \n        external \n        onlyRole(RoleManagement.Role.UserAdmin) \n        isInitialized\n    {   \n        bytes memory orgBytes = bytes(_organization);\n        require(orgBytes.length>0, \"empty string\");\n        db.setUser(_user, _organization);\n    }\n    \n    /// @notice function to set / edit the rights of an user / account, only executable for Top-Admins!\n    /// @param _user user that rights will change\n    /// beware: if the only TopAdmin revokes its own rights noone will be able to get TopAdmin-rights back, making it impossible to set any new admin-rights\n    /// @param _rights rights encoded as bitmask\n    function setRoles(address _user, uint _rights) \n        external \n        onlyRole(RoleManagement.Role.UserAdmin)\n        isInitialized\n        userExists(_user)\n    {\n        db.setRoles(_user, _rights);\n    }\n\n    /// @notice function to update the logic of a smart contract\n    /// @param _newLogic contract-address of the new smart contract, replacing the currently active one\n    function update(address _newLogic) \n        external\n        onlyOwner\n        isInitialized\n    {\n        db.changeOwner(_newLogic);\n    }\n\n    /// @notice function that checks if there is an user for the provided ethereum-address\n    /// @param _user ethereum-address of that user\n    /// @return bool if the user exists\n    function doesUserExist(address _user) \n        external \n        view \n        returns (bool) \n    {\n        return db.getFullUser(_user).active;\n    }\n\n    /// @notice function to return all the data of an user\n    /// @param _user user \n    /// @return returns firstName, surname, organization, street, number, zip, city, country, state, roles and the active-flag\n    function getFullUser(address _user)\n        external\n        view \n        returns (\n            string _organization,\n            uint _roles,\n            bool _active\n        )\n    {\n        UserDB.User memory user = db.getFullUser(_user);\n        _organization = user.organization;\n        _roles = user.roles;\n        _active = user.active;\n    }\n\n    /// @notice function to retrieve the rights of an user\n    /// @dev if the user does not exist in the mapping it will return 0x0 thus preventing them from accidently getting any rights\n    /// @param _user user someone wants to know its rights\n    /// @return bitmask with the rights of the user\n    function getRolesRights(address _user) \n        external \n        view \n        returns (uint) \n    {\n        return db.getFullUser(_user).roles;\n    }\n}","networks":"{}"}